<div class="tab-pane fade show active mt-4">
    <h4 class="head text-center">{{title}}</h4>
    <br/>
    <!-- Summary Stats-->
    <div class="card mst--expansion-panel mst--info-panel" *ngIf="summaryStats">
        <div class="card-header">
            <h5>Summary Stats</h5>
        </div>
        <div class="body">
            <ul>
                <li><strong>From:</strong> {{summaryStats.b | fmtDate}}</li>
                <li><strong>To:</strong> {{summaryStats.e | fmtDate}}</li>
                <li><strong>Count:</strong> {{summaryStats.c}}</li>
                <li><strong>Size:</strong> {{summaryStats.s | bytes:2}}</li>
            </ul>
        </div>
    </div>
    <div class="card mst--expansion-panel mst--info-panel">
        <div class="card-header">
            <h5>Your Request
                <span class="ml-2 click-event" (click)="show_schedule(content)">
                    <i class="fas fa-calendar-plus"></i>
                </span>
                <!--
                <button class="btn ml-2"
                        (click)='show_schedule(content)'><i class="fas fa-calendar-plus"></i></button>
                -->
            </h5>
        </div>
        <div class="body">
            <dl class="request-summary">
                <div class="input-group mb-3">
                    <input type="text" class="mst--input pl-0 col"
                           [(ngModel)]="formData.name"
                           [ngClass]="{'mst--input-error': emptyName()}"
                           placeholder="Product name"
                           required>
                    <div class="input-group-append" [ngClass]="{'mst--input-error': emptyName()}">
                        <ng-template #tipContent>
                            Please give a name or a short description to your product
                        </ng-template>
                        <button class="btn-reset" type="button"
                                [ngbTooltip]="tipContent"
                                placement="left">
                            <i class="material-icons">info</i>
                        </button>
                    </div>
                    <span class="mst--input-error-msg" *ngIf="emptyName()">Product name is required</span>
                </div>
                <dt>Dataset(s)</dt>
                <dd>
                    <ul class="comma-list">
                        <li *ngFor="let ds of formData.datasets">{{ds}}</li>
                    </ul>
                </dd>
                <hr>
                <dt>Filter(s)</dt>
                <dd *ngIf="formData.filters.length">
                    <dl class="row">
                        <ng-container *ngFor="let f of formData.filters">
                            <dt class="col-sm-3" style="font-weight: normal;">{{f.name}}</dt>
                            <dd class="col-sm-9"><p *ngFor="let v of f.values">{{v.desc}}</p></dd>
                        </ng-container>
                    </dl>
                </dd>
                <dd *ngIf="!formData.filters || !formData.filters.length">None</dd>
                <hr>
                <dt>Post-Processing</dt>
                <dd>None</dd>
            </dl>
        </div>
    </div>
</div>
<div class="form-group text-center space-20">
    <button class="btn btn-outline-secondary mr-2" type="button"
            (click)="goToPrevious()"><i class="fa fa-arrow-left" aria-hidden="true"></i> Previous
    </button>
    <button class="btn btn-info" [disabled]="!isFormValid || emptyName() || summaryStats.c === 0"
            (click)="submit()"> Submit <i class="fa fa-arrow-right" aria-hidden="true"></i>
    </button>
</div>

<!-- Schedule Modal -->
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Schedule this request</h4>
        <button type="button" class="btn close" aria-label="Close" (click)="modal.dismiss()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" role="form">
            <div class="form-group row" style="align-items: center;">
                <label for="scheduleDate" class="col-sm-1 col-form-label"><i class="fa fa-clock"></i></label>
                <div class="input-group col-sm-6">
                    <input id="scheduleDate" class="form-control" placeholder="yyyy-mm-dd"
                           name="dp" [(ngModel)]="scheduling.date" ngbDatepicker #d="ngbDatepicker">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
                            <i class="fa fa-calendar"></i>
                        </button>
                    </div>
                </div>
                <div class="input-group col-sm-5">
                    <ngb-timepicker [(ngModel)]="scheduling.time" name="scheduleTime"></ngb-timepicker>
                </div>
            </div>
            <div class="form-group row">
                <label for="scheduleRepeat" class="col-sm-1 col-form-label"><i class="fa fa-history"></i></label>
                <div class="col-sm-6">
                    <select id="scheduleRepeat" class="form-control">
                        <option selected>Does not repeat</option>
                        <option>Every day</option>
                    </select>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-info" type="button">Add</button>
    </div>
</ng-template>

